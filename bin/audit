#!/usr/bin/env bash
set -euo pipefail

echo "== Security: Brakeman =="
bin/brakeman --quiet --no-pager --exit-on-warn --exit-on-error

echo "== Security: Gem audit =="
bin/bundler-audit

echo "== Security: Yarn audit =="
# yarn audit exit codes: 0=clean, other=vulnerabilities found.
# Report findings but don't block on transitive dependency advisories
# that have no available fix (e.g. minimatch in eslint).
yarn audit || echo "  (yarn audit reported advisories â€” review above)"

echo "All security checks passed."
